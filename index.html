<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LoL Kiting Bot | Kontrollü Erişim</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>
<body>

    <header id="header">
    <nav>
        <div class="logo">KITE.BOT</div>
        <ul>
            <li><a href="#about" class="nav-link active" data-page="about">Hakkında</a></li>
            <li><a href="#patchnotes" class="nav-link" data-page="patchnotes">Yama Notları</a></li> 
            
            <li><a href="#guide" class="nav-link" data-page="guide">Kullanım Kılavuzu</a></li>

            <li id="nav-login"><a href="#auth" class="nav-link" data-page="auth">Giriş / Kayıt</a></li>
            <li id="nav-profile" style="display: none;"><a href="#profile" class="nav-link" data-page="profile">Profil & Key</a></li>
            <li id="nav-feedback" style="display: none;"><a href="#feedback" class="nav-link" data-page="feedback">Geri Bildirim</a></li>
            <li id="nav-download" style="display: none;"><a href="#download" class="nav-link" data-page="download">İndir & Kurulum</a></li>
        </ul>
    </nav>
</header>

    <main id="content-area">
        
        <section id="about" class="page active">
            <div class="container">
                <h1>League of Legends Kiting Bot</h1>
                <p class="subtitle">ADC performansınızı kusursuz zamanlama ile zirveye taşıyın.</p>
                
                <div class="features-grid">
                    <div class="feature-item">
                        <h3>🤖 Gelişmiş Güvenlik</h3>
                        <p>Gaussian Jitter, kasıtlı hata simülasyonu ve Key koruması ile Vanguard'a direnç.</p>
                    </div>
                    <div class="feature-item">
                        <h3>🔑 Kontrollü Dağıtım</h3>
                        <p>Botu kullanmak için 3 günlük deneme key'i gereklidir. Erişim sadece kayıtlı kullanıcılara açıktır.</p>
                    </div>
                    <div class="feature-item">
                        <h3>✨ Modern Arayüz</h3>
                        <p>TTK Bootstrap ile tasarlanmış, kullanımı kolay, şık ve koyu tema destekli GUI.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="patchnotes" class="page hidden">
            <div class="container">
                <h2>Yama Notları (Patch Notes)</h2>
                <p class="subtitle">Botun tüm geliştirme ve güvenlik güncellemelerini buradan takip edebilirsiniz.</p>

                <div class="patch-version">
                    <h3>V0.1.3 - Güvenlik & Performans Optimizasyonu</h3>
                    <span class="patch-date">15 Ekim 2025</span>
                    <ul class="patch-list">
                        <li class="added">🔑 Yeni: Key (Lisans) sistemi için altyapı entegre edildi.</li>
                        <li class="added">🤖 Geliştirildi: Kiting gecikmeleri için rastgelelik dağılımı (Jitter) **Normal (Gaussian) Dağılım** ile değiştirildi.</li>
                        <li class="fix">✅ Düzeltildi: 'A' tuşu ve Sağ Tık basılı kalma süreleri rastgeleleştirilerek mükemmel tutarlılık ortadan kaldırıldı.</li>
                        <li class="removed">🚨 Güvenlik: Bot döngüsüne binde bir oranında kasıtlı hata atlama mekanizması eklendi.</li>
                    </ul>
                </div>
                
                <div class="patch-version">
                    <h3>V0.1.0 - İlk Yayın</h3>
                    <span class="patch-date">01 Ekim 2025</span>
                    <ul class="patch-list">
                        <li class="added">✨ Yeni: İlk sürüm yayınlandı. Temel orb-walking mantığı ve şampiyon veri tabanı eklendi.</li>
                        <li class="added">🎨 Yeni: TTK Bootstrap ile modern GUI eklendi.</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="guide" class="page hidden">
             <div class="container">
                <h2>Kullanım Kılavuzu</h2>
                
                <h3>1. Yapılandırma</h3>
                <p>Arayüzde şampiyonunuzu seçin, seviyenizi ve isteğe bağlı olarak anlık saldırı hızınızı (AS) girin. "Delay Güncelle" butonuna basmayı unutmayın!</p>

                <h3>2. Başlatma/Durdurma (Toggle)</h3>
                <p>LoL oyununuz açıkken, bot arayüzü odaklanmış durumdayken **Spacebar (Boşluk Çubuğu)** tuşuna bir kez basarak botu **AÇIN**. Bot otomatik olarak A-Tıkla komutlarını göndermeye başlayacaktır.</p>
                
                <h3>3. Key Aktivasyonu</h3>
                <p>Bot EXE'sini ilk çalıştırdığınızda, **Profil & Key** sayfanızda size verilen Key'i girerek botunuzu etkinleştirmeniz gerekmektedir.</p>

                <h3>🚨 Uyarı</h3>
                <p class="warning-box">Güvenlik için lütfen botu sadece LoL penceresi aktif ve odaklanmış durumdayken kullanın.</p>
            </div>
        </section>

        <section id="auth" class="page hidden">
            <div class="container auth-container">
                <h2 id="auth-title">Kullanıcı Girişi</h2>
                <div class="auth-toggle">
                    <button class="toggle-btn active" onclick="showAuth('login')">Giriş Yap</button>
                    <button class="toggle-btn" onclick="showAuth('register')">Kayıt Ol</button>
                </div>

                <form id="login-form" onsubmit="handleAuth(event, 'login')">
                    <input type="email" id="login-email" placeholder="E-posta Adresi" required>
                    <input type="password" id="login-password" placeholder="Şifre" required>
                    <button type="submit" class="auth-button">Giriş Yap</button>
                    <p id="login-message" class="message"></p>
                </form>

                <form id="register-form" onsubmit="handleAuth(event, 'register')" style="display: none;">
                    <input type="text" id="register-username" placeholder="Kullanıcı Adı" required>
                    <input type="email" id="register-email" placeholder="E-posta Adresi" required>
                    <input type="password" id="register-password" placeholder="Şifre (Min 6 Karakter)" required>
                    <button type="submit" class="auth-button">Kayıt Ol</button>
                    <p id="register-message" class="message"></p>
                </form>
            </div>
        </section>

        <section id="profile" class="page hidden">
            <div class="container">
                <h2>Profil ve Key Yönetimi</h2>
                <p>Hoş geldiniz, <span id="profile-username" class="neon-text">KullanıcıAdı</span>!</p>

                <div class="key-status-box">
                    <h3>Deneme Key'iniz</h3>
                    <p class="key-value" id="trial-key">KEY-SIMULATED-E4G-K7L-9A2X</p>
                    <p>Geçerlilik: <span id="key-expiry-date">3 Gün Kaldı (18 Ekim 2025'e kadar)</span></p>
                    <p class="warning-box">**DİKKAT:** Bu Key, botun EXE dosyasını çalıştırırken girmeniz gereken lisans anahtarınızdır.</p>
                </div>

                <button class="download-button" onclick="changePage('download')">Botu İndir</button>
                <button class="auth-button logout-button" onclick="handleLogout()">Çıkış Yap</button>
            </div>
        </section>

        <section id="feedback" class="page hidden">
            <div class="container">
                <h2>Geri Bildirim Alanı</h2>
                <p class="subtitle">Botun performansı, hataları veya geliştirme önerileriniz hakkında bize yazın.</p>
                
                <form id="feedback-form" onsubmit="submitFeedback(event)">
                    <textarea id="feedback-text" rows="8" placeholder="Geri bildiriminizi buraya yazın..." required></textarea>
                    <div class="feedback-options">
                        <label>
                            <input type="radio" name="feedback-type" value="Hata" required> Hata Bildirimi
                        </label>
                        <label>
                            <input type="radio" name="feedback-type" value="Öneri"> Özellik Önerisi
                        </label>
                        <label>
                            <input type="radio" name="feedback-type" value="Teşekkür"> Teşekkür
                        </label>
                    </div>
                    <button type="submit" class="auth-button">Geri Bildirimi Gönder</button>
                    <p id="feedback-message" class="message"></p>
                </form>
            </div>
        </section>


        <section id="download" class="page hidden">
            <div class="container">
                <h2>Botu İndir ve Kurulum</h2>
                <p>Botun en güncel Key korumalı sürümünü indirmek için aşağıdaki butonu kullanın.</p>
                
                <a href="/downloads/kite_bot_v0.2.exe" class="download-button" id="final-download-link">
                    Key Korumalı Botu İndir (v0.2.EXE)
                </a>

                <p class="warning-box">**Önemli:** İndirdikten sonra EXE dosyasını çalıştırın ve size Profil sayfanızda verilen Key'i girerek botu etkinleştirin.</p>
                
                <ol class="setup-list">
                    <li>**Gereksinimler:** Yok (EXE bağımsız çalışır).</li>
                    <li>İndirdiğiniz dosyayı güvenilir bir konuma taşıyın.</li>
                    <li>Botu çalıştırın ve Key'inizi girin.</li>
                    <li>Oyun içindeyken Spacebar ile başlatın/durdurun.</li>
                </ol>
            </div>
        </section>

         <section id="guide" class="page hidden">
            <div class="container">
                <h2>Kullanım Kılavuzu</h2>
                
                <h3>1. Yapılandırma</h3>
                <p>Arayüzde şampiyonunuzu seçin, seviyenizi ve isteğe bağlı olarak anlık saldırı hızınızı (AS) girin. "Delay Güncelle" butonuna basmayı unutmayın!</p>

                <h3>2. Başlatma/Durdurma (Toggle)</h3>
                <p>LoL oyununuz açıkken, bot arayüzü odaklanmış durumdayken **Spacebar (Boşluk Çubuğu)** tuşuna bir kez basarak botu **AÇIN**. Bot otomatik olarak A-Tıkla komutlarını göndermeye başlayacaktır.</p>
                
                <h3>3. Key Aktivasyonu</h3>
                <p>Bot EXE'sini ilk çalıştırdığınızda, **Profil & Key** sayfanızda size verilen Key'i girerek botunuzu etkinleştirmeniz gerekmektedir.</p>

                <h3>🚨 Uyarı</h3>
                <p class="warning-box">Güvenlik için lütfen botu sadece LoL penceresi aktif ve odaklanmış durumdayken kullanın.</p>
            </div>
        </section>

    </main>

    <footer>
        <p>&copy; 2024 Kite Bot Projesi. Kontrollü Dağıtım Sistemli.</p>
    </footer>

    <!-- DİKKAT: Normalde bu js/script.js olmalıydı, ancak API URL'yi kolayca gömmek için içeriği buraya taşıyoruz. -->
    <script>
        // --------------------------------------------------------------------------------
        // CANLI API ADRESİ BURADA BELİRLENİR. LÜTFEN KENDİ RENDER URL'NİZİ YAPIŞTIRIN!
        // --------------------------------------------------------------------------------
        // ÖRNEK: const API_URL = "https://kitebot-api-xxx.onrender.com"; 
        const API_URL = "https://kitebot-api.onrender.com"; 
        
        // Firestore için Firebase yapılandırması (Kullanılmıyor, ancak API bağlantısı için gereksiz)
        // const __app_id = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        // const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
        // const __initial_auth_token = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        // Firebase kütüphaneleri (Sadece API URL için gerekli değil, sadece iskeletini tutuyoruz)
        // import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        // import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        // import { getFirestore, doc, setDoc, updateDoc, getDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        let user = null;
        let isAuthReady = false;

        // Sayfa Değiştirme Fonksiyonu
        function changePage(targetId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.add('hidden');
            });
            document.getElementById(targetId).classList.remove('hidden');

            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            document.querySelector(`[data-page='${targetId}']`).classList.add('active');
        }

        // Oturum Durumuna Göre Navigasyonu Güncelleme
        function updateNavigation(currentUser) {
            if (currentUser) {
                user = currentUser;
                document.getElementById('nav-login').style.display = 'none';
                document.getElementById('nav-profile').style.display = 'block';
                document.getElementById('nav-feedback').style.display = 'block';
                document.getElementById('nav-download').style.display = 'block';

                if (document.getElementById('auth').classList.contains('active')) {
                    changePage('profile');
                }
            } else {
                user = null;
                document.getElementById('nav-login').style.display = 'block';
                document.getElementById('nav-profile').style.display = 'none';
                document.getElementById('nav-feedback').style.display = 'none';
                document.getElementById('nav-download').style.display = 'none';
                if (document.getElementById('profile').classList.contains('active') || document.getElementById('feedback').classList.contains('active') || document.getElementById('download').classList.contains('active')) {
                    changePage('about');
                }
            }
        }

        // Giriş/Kayıt Görünümünü Değiştirme
        function showAuth(type) {
            document.getElementById('auth-title').textContent = type === 'login' ? 'Kullanıcı Girişi' : 'Yeni Kayıt';
            document.getElementById('login-form').style.display = type === 'login' ? 'block' : 'none';
            document.getElementById('register-form').style.display = type === 'register' ? 'block' : 'none';

            document.querySelectorAll('.auth-toggle .toggle-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`.auth-toggle .toggle-btn:nth-child(${type === 'login' ? 1 : 2})`).classList.add('active');
        }

        // Çıkış İşlemi
        async function handleLogout() {
            try {
                // Burada Firebase signOut komutu olmalıydı. API ile sadece state'i güncelliyoruz.
                updateNavigation(null);
                showMessage('login-message', 'Başarıyla çıkış yapıldı.', 'success');
                changePage('auth');
            } catch (error) {
                console.error("Çıkış hatası:", error);
            }
        }

        // API Çağrısı Yardımcı Fonksiyon
        async function fetchAPI(endpoint, data = {}) {
            const token = user ? "simulated_token_" + user.uid : ""; 
            const url = `${API_URL}/${endpoint}`;
            const headers = { 'Content-Type': 'application/json' };
            if (token) headers['Authorization'] = `Bearer ${token}`;

            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: headers,
                    body: JSON.stringify(data)
                });

                const json = await response.json();

                if (!response.ok) {
                    throw new Error(json.error || 'Bilinmeyen bir hata oluştu');
                }
                return json;
            } catch (error) {
                console.error(`API ${endpoint} hatası:`, error);
                throw error;
            }
        }

        // Giriş/Kayıt Formu İşleyicisi
        async function handleAuth(event, type) {
            event.preventDefault();
            const email = document.getElementById(`${type}-email`).value;
            const password = document.getElementById(`${type}-password`).value;
            const username = type === 'register' ? document.getElementById('register-username').value : '';
            const messageElement = document.getElementById(`${type}-message`);
            messageElement.textContent = 'İşleniyor...';
            messageElement.classList.remove('error', 'success');

            try {
                const endpoint = type === 'register' ? 'register' : 'login';
                const data = type === 'register' ? { email, password, username } : { email, password };
                
                const response = await fetchAPI(endpoint, data);

                // Başarılı olduğunda simüle edilmiş bir kullanıcı oluştur
                const simulatedUser = { 
                    uid: response.user_id || `simulated_${Math.random().toString(36).substr(2, 9)}`,
                    displayName: response.username || username || email.split('@')[0]
                };

                updateNavigation(simulatedUser);
                showMessage(messageElement.id, response.message || (type === 'register' ? 'Kayıt başarılı! Profil sayfasına yönlendiriliyorsunuz.' : 'Giriş başarılı!'), 'success');
                
                // Profil sayfasını güncelle
                document.getElementById('profile-username').textContent = simulatedUser.displayName;
                document.getElementById('trial-key').textContent = response.key || 'KEY-ALINAMADI-HATA';
                document.getElementById('key-expiry-date').textContent = response.expiry_date || '3 Gün Kaldı';

                setTimeout(() => changePage('profile'), 1500);

            } catch (error) {
                const errorMessage = error.message.includes('network') ? 'Sunucuya ulaşılamıyor. API URL'sini kontrol edin.' : error.message;
                showMessage(messageElement.id, `Hata: ${errorMessage}`, 'error');
            }
        }

        // Geri Bildirim Gönderme İşlemi
        async function submitFeedback(event) {
            event.preventDefault();
            const form = event.target;
            const messageElement = document.getElementById('feedback-message');
            messageElement.textContent = 'Gönderiliyor...';
            messageElement.classList.remove('error', 'success');

            if (!user) {
                showMessage('feedback-message', 'Hata: Geri bildirim göndermek için önce giriş yapmalısınız.', 'error');
                return;
            }

            const feedbackText = document.getElementById('feedback-text').value;
            const feedbackType = form.elements['feedback-type'].value;

            try {
                const response = await fetchAPI('feedback', { 
                    feedback_text: feedbackText, 
                    feedback_type: feedbackType 
                });
                
                showMessage('feedback-message', response.message || 'Geri bildiriminiz başarıyla iletildi! Teşekkür ederiz.', 'success');
                form.reset();
            } catch (error) {
                showMessage('feedback-message', `Hata: ${error.message}`, 'error');
            }
        }

        // Mesaj Kutusu Yönetimi
        function showMessage(elementId, text, type) {
            const element = typeof elementId === 'string' ? document.getElementById(elementId) : elementId;
            element.textContent = text;
            element.classList.remove('error', 'success');
            element.classList.add(type);
        }

        // Sayfa yüklendiğinde
        document.addEventListener('DOMContentLoaded', () => {
            // İlk sayfa olarak 'about'u göster
            changePage('about');
            
            // Navigasyon linkleri için olay dinleyicisi ekle
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = link.getAttribute('data-page');

                    // Giriş yapılmadıysa ve korumalı sayfaya gidiyorsa
                    if (!user && (targetId === 'profile' || targetId === 'feedback' || targetId === 'download')) {
                        changePage('auth');
                        showMessage('login-message', 'Bu sayfaya erişim için lütfen giriş yapın veya kayıt olun.', 'error');
                    } else {
                        changePage(targetId);
                    }
                });
            });

            // Başlangıç navigasyon durumunu ayarla (Çıkış yapmış kabul ediyoruz)
            updateNavigation(null); 
            isAuthReady = true; 
        });
    </script>
</body>
</html>

